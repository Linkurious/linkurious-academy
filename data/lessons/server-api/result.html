<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    @import url("/lib/highlight/styles/github.css?20160106");
  </style>
  <script src="/lib/highlight/highlight.pack.js"></script> <!--https://highlightjs.org/-->
</head>
<body>
  <article id="response">Loading...</article>

<script>
'use strict';

var LKTutorials = window.parent.LKTutorials;

function test(xhr, response) {
  var answer = (response !== undefined) ? response : xhr;

  var content = JSON.stringify(answer, null, '  '); // indent with 2 space blocks

  function setResult(content) {
    content = (answer !== '') ? content : 'No Content';
    var preElt = document.createElement('pre');
    var codeElt = document.createElement('code');
    codeElt.textContent = content;
    hljs.highlightBlock(codeElt);
    preElt.appendChild(codeElt);
    document.getElementById('response').replaceChild(
      preElt,
      document.getElementById('response').firstChild
    );
  }

  validate(answer).then(function() {
    setResult(content);
    LKTutorials.onResultSuccess();
  })
  .catch(function() {
    setResult(content);
    LKTutorials.onResultError();
  });
}

function error(e, xhr, response) {
  document.getElementById('response').textContent = e;
  LKTutorials.onResultError();
}

function run(submittedCode) {
  try {
    eval(submittedCode);
  } catch(e) {
    var msg = e.name + ': ' + e.message;
    document.getElementById('response').textContent = msg;
    LKTutorials.onResultError();
  }
}

LKTutorials.onResultFrameReady();
</script>
</body>
</html>
